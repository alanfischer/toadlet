set (FFMPEG_FOUND "NO")
unset (FFMPEG_LIBRARIES)

find_path (FFMPEG_INCLUDE_DIR libavcodec/avcodec.h)
find_library (AVCODEC_LIBRARY NAMES avcodec)
find_library (AVFORMAT_LIBRARY NAMES avformat)
find_library (AVUTIL_LIBRARY NAMES avutil)
find_library (SWSCALE_LIBRARY NAMES swscale)

if (AVCODEC_LIBRARY)
	set (FFMPEG_LIBRARIES ${FFMPEG_LIBRARIES} ${AVCODEC_LIBRARY})
endif (AVCODEC_LIBRARY)
if (AVFORMAT_LIBRARY)
	set (FFMPEG_LIBRARIES ${FFMPEG_LIBRARIES} ${AVFORMAT_LIBRARY})
endif (AVFORMAT_LIBRARY)
if (AVUTIL_LIBRARY)
	set (FFMPEG_LIBRARIES ${FFMPEG_LIBRARIES} ${AVUTIL_LIBRARY})
endif (AVUTIL_LIBRARY)
if (SWSCALE_LIBRARY)
	set (FFMPEG_LIBRARIES ${FFMPEG_LIBRARIES} ${SWSCALE_LIBRARY})
endif (SWSCALE_LIBRARY)

mark_as_advanced (FFMPEG_INCLUDE_DIR FFMPEG_LIBRARIES AVCODEC_LIBRARY AVFORMAT_LIBRARY AVUTIL_LIBRARY SWSCALE_LIBRARY)

message (STATUS "FFmpeg include dir: ${FFMPEG_INCLUDE_DIR}")
message (STATUS "FFmpeg libraries: ${FFMPEG_LIBRARIES}")

if (FFMPEG_INCLUDE_DIR AND FFMPEG_LIBRARIES)
	set (FFMPEG_FOUND "YES")
	set (FFMPEG_LIBRARIES ${FFMPEG_LIBRARIES} CACHE FILEPATH "All FFmpeg related libraries" FORCE)
endif (FFMPEG_INCLUDE_DIR AND FFMPEG_LIBRARIES)

if (FFMPEG_FOUND)
	if (NOT FFMPEG_FIND_QUITELY)
		message (STATUS "FFMPEG found")
	endif (NOT FFMPEG_FIND_QUITELY)
else (FFMPEG_FOUND)
	if (FFMPEG_FIND_REQUIRED)
		message (FATAL_ERROR "Could NOT find FFMPEG")
	endif (FFMPEG_FIND_REQUIRED)
	if (NOT FFMPEG_FIND_QUITELY)
		message (STATUS "Could NOT find FFMPEG")
	endif (NOT FFMPEG_FIND_QUITELY)
endif (FFMPEG_FOUND)

